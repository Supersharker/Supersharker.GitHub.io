---
layout:     post
title:      FPGAæœ‰é™çŠ¶æ€æœº&å®ä¾‹æ“ä½œç†è§£
subtitle:   å®è·µæ˜¯æ£€éªŒçœŸç†çš„å”¯ä¸€æ ‡å‡†   
date:       2020-04-08
author:     WC
header-img: img/post-bg-unix-linux.jpg
catalog: 	 true
tags:
    -FPGA
---

>å°±é™ä¸‹å¿ƒæ¥å¥½å¥½æƒ³æƒ³

# æœ‰é™çŠ¶æ€æœºï¼Ÿ

&#8195;&#8195;å…„å¼Ÿï¼Œä½ è¦æ˜¯ç¿»å¼€è¿™ç¯‡æ–‡ç« ï¼Œæå¤§å¯èƒ½æ˜¯æˆ‘åˆ†äº«ç»™ä½ çš„ç½‘å€ï¼Œohï¼Œæ— æƒ…ï¼Œä¸€èˆ¬æ˜¯ä¸ä¼šæœ‰äººæ¥æˆ‘è¿™å„¿çš„ï¼Œå¤ªçœŸå®äº†ã€‚æ²¡äº‹ï¼Œå› ä¸ºä»Šå¤©åˆšåˆšå­¦ä¹ äº†FPGAçŠ¶æ€æœºçš„çŸ¥è¯†ï¼Œä½†æ˜¯å¥½åƒèµ·åºŠæœ‰ç‚¹æ™šï¼Œemmmmmmmmåæ­£ç°åœ¨æˆ‘é€šè¿‡è¯¾ä»¶ä»¥åŠç½‘ç»œä¸Šçš„èµ„æºï¼Œæ•´ç†äº†ä¸€æ®µæ–‡å­—ç”¨æ¥é˜è¿°æˆ‘ç°åœ¨å¯¹çŠ¶æ€æœºçš„ç†è§£ï¼Œæˆ‘è®¤ä¸ºåº”è¯¥æ˜¯æ¯”è¾ƒå¥½ç†è§£çš„ï¼Œæ¯•ç«Ÿæˆ‘è¿™ä¹ˆç¬¨çš„äººéƒ½æ…¢æ…¢ç†è§£åˆ°äº†ï¼Œä½ å½“ç„¶è°‹é—®é¢˜å•¦ğŸ‘ğŸ‘ğŸ‘ğŸ‘ğŸ‘æœ‰ç‚¹æç¬‘çš„æ˜¯ç”±äºæˆ‘æ‰¾çš„èµ„æ–™ä¸æ˜¯å¾ˆç³»ç»Ÿï¼Œå¯¼è‡´æˆ‘æœ¬æ¥å¼€å§‹ç®—æ˜¯æ¯”è¾ƒæ¸…æ¥šçš„ï¼Œç„¶åæŸä¸€ä¸ªé˜¶æ®µæˆ‘ç®€ç›´å°±æ˜¯

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://image.baidu.com/search/detail?ct=503316480&z=0&ipn=d&word=%E6%88%91%E6%98%AF%E8%B0%81%E6%88%91%E5%9C%A8%E5%93%AA%E5%84%BF&hs=2&pn=3&spn=0&di=164450&pi=0&rn=1&tn=baiduimagedetail&is=0%2C0&ie=utf-8&oe=utf-8&cl=2&lm=-1&cs=2285590725%2C1397453283&os=3172843579%2C102031219&simid=3476486193%2C374581306&adpicid=0&lpn=0&ln=30&fr=ala&fm=&sme=&cg=&bdtype=0&oriquery=%E6%88%91%E6%98%AF%E8%B0%81%E6%88%91%E5%9C%A8%E5%93%AA%E5%84%BF&objurl=http%3A%2F%2Fbiaoqingba.cn%2Fwp-content%2Fuploads%2F2018%2F03%2Fa9b223b5c7eb051-240x180.jpg&fromurl=ippr_z2C%24qAzdH3FAzdH3Fktw5qtg2kw_z%26e3BvgAzdH3F8a0dn_z%26e3Bip4s&gsm=4&islist=&querylist=)

&#8195;&#8195;æ‰€ä»¥è¿˜æ˜¯å­¦ä¹ å¥½ï¼Œå—¯ï¼ŒçœŸé¦™ï¼

### æœ‰é™çŠ¶æ€æœºç†è®ºç†è§£

[ç»´åŸºç™¾ç§‘å…³äºæœ‰é™çŠ¶æ€æœºç»™å‡ºçš„è§£é‡Š](https://zh.wikipedia.org/wiki/%E6%9C%89%E9%99%90%E7%8A%B6%E6%80%81%E6%9C%BA)  
[ç™¾åº¦ç™¾ç§‘å…³äºçŠ¶æ€æœºçš„è§£é‡Š](https://baike.baidu.com/item/%E7%8A%B6%E6%80%81%E6%9C%BA/6548513?fr=aladdin)

&#8195;&#8195;ç»´åŸºç™¾ç§‘ä¸Šè§£é‡Šè¯´ï¼šè¡¨ç¤ºæœ‰é™ä¸ªçŠ¶æ€ä»¥åŠåœ¨è¿™äº›çŠ¶æ€ä¹‹é—´çš„è½¬ç§»å’ŒåŠ¨ä½œç­‰è¡Œä¸ºçš„æ•°å­¦è®¡ç®—æ¨¡å‹ã€‚æˆ‘è§‰å¾—ç»†å“ä¸‹æ¥ï¼Œå¥½åƒæœ‰å†…å‘³~çŠ¶æ€æœºå°±æ˜¯ä¸€ä¸ªæˆ‘ä»¬ç”¨æˆ·è‡ªå®šä¹‰å°è£…çš„ä¸€ä¸ªæ¨¡å—ï¼Œè‡ªç”±åº¦å°±ä¸è¯´äº†ï¼Œå°±æ˜¯é€šè¿‡ç»„åˆé€»è¾‘å’Œå¯„å­˜å™¨å°†ä¸€ä¸ªåŠŸèƒ½ï¼Œä¸€ä¸ªå¸¦æœ‰æ—¶åºé€»è¾‘çš„åŠŸèƒ½ä½“ç°å‡ºæ¥ï¼Œåªæ˜¯å…¶ä¸­çš„å˜é‡åˆšå¼€å§‹æˆ‘ç¡®å®æ‡µé€¼ï¼Œä½†æ˜¯ä»”ç»†çœ‹äº†ä¸€ä¸‹ï¼Œå‘ç°ä¸­é—´çš„çŠ¶æ€ä»€ä¹ˆç¡®å®å¾ˆæ‡µé€¼ï¼Œåˆšå¼€å§‹æ¥è§¦çš„åŸå› ï¼Œå°±æ˜¯è¿™æ ·äº†ï¼ŒåŸè°…æˆ‘çš„æ„šç¬¨ï¼Œç°åœ¨åº”è¯¥ç®—æ˜¯ææ¸…æ¥šäº†ã€‚

##### çŠ¶æ€æœºçš„åˆ†ç±»

&#8195;&#8195;æŒ‰ç…§çŠ¶æ€æœºçš„è¾“å‡ºå…³ç³»å¯ä»¥åˆ†ä¸ºä¸¤ç±»ï¼šMealyçŠ¶æ€æœºå’ŒMooreçŠ¶æ€æœºï¼Œå…¶å®è¯¾ä»¶ä¸Šè§£é‡Šçš„å¾ˆæ¸…æ¥šäº†ï¼Œé‚£æˆ‘å°±ç›´æ¥è´´ä¸Šæ¥äº†ï¼š
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20200408224407418.png)
&#8195;&#8195;ä¸‹å›¾æ˜¯MealyçŠ¶æ€æœºçš„ç»“æ„å›¾
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20200408224437178.png)
&#8195;&#8195;è¿™æ˜¯MooreçŠ¶æ€æœºçš„ç»“æ„å›¾
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20200408224539508.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzc2MTQ5MQ==,size_16,color_FFFFFF,t_70)
&#8195;&#8195;çœ‹å›¾çš„æ„æ€å°±æ˜¯MealyçŠ¶æ€æœºçš„è¾“å‡ºæ¨¡å—æœ‰ä¸¤ä¸ªè¾“å…¥çœ‹åˆ°äº†å—ï¼Œcurrent_stateå’Œè¾“å…¥ä¿¡å·è¿™ä¸¤ä¸ªï¼Œè€ŒMooreçŠ¶æ€æœºçš„è¾“å‡ºåªæœ‰ä¸€ä¸ªå½“å‰çŠ¶æ€ï¼ˆcurrent_stateï¼‰ï¼Œè¿™ä¸ªåŒºåˆ«å°±å¾ˆå¥½çš„å¸®æˆ‘åŒºåˆ†äº†è¿™ä¸¤ä¸ªçŠ¶æ€æœºï¼Œè¿™æ ·ä¸è‡³äºè¯´æˆ‘ä»¬ä¼šæ··æ·†ã€‚ä¸‹é¢è¿˜æ˜¯è´´ä¸€æ®µç¤ºä¾‹ä»£ç ï¼Œè¿™ä¸ªæˆ‘è¯´æ˜æ¸…æ¥šäº†æ˜¯è¯¾ä»¶ä¸Šçš„ä»£ç ï¼Œå› ä¸ºæˆ‘è§‰å¾—è¿˜æ˜¯å¾ˆæ¸…æ¥šå¾ˆæœ‰ç”¨çš„ã€‚ï¼ˆæ³¨é‡Šçº¯æ‰‹æ‰“ï¼Œåˆ«å¿˜äº†çœ‹å“¦ï¼‰

```bash
//å…ˆå†™MooreçŠ¶æ€æœºçš„å§
//å®šä¹‰ä¸¤ä¸ªå¯„å­˜å™¨ç”¨æ¥å­˜æ”¾å½“å‰çŠ¶æ€å’Œä¸‹ä¸€çŠ¶æ€ï¼Œstateå°±æ˜¯current_state
reg [1:0] state ,next_state;  

always @(posedge clk) 
	begin 
		//è¯´æ˜çŠ¶æ€è½¬æ¢å…³ç³»ï¼Œå°†ä¹‹å‰ä¸€é˜¶æ®µçš„ä¸‹ä¸€é˜¶æ®µèµ‹å€¼ç»™å½“å‰é˜¶æ®µ
		//æˆ‘æ„Ÿè§‰å¯ä»¥ç†è§£ä¸ºå°†çŠ¶æ€è£…åœ¨å¯„å­˜å™¨é‡Œï¼Œç„¶åé€šè¿‡caseè¯­å¥è¿›è¡ŒåŒ¹é…
		state = next_state; 
		case (state) 
			2â€™d0: //çŠ¶æ€0
				begin 
					out = 1;// è¾“å‡º 
					if (in1) next_state = 1; // ä¸‹ä¸€çŠ¶æ€ç¡®å®š 
					else next_state = 2; 
				end 
			2â€™d1: //çŠ¶æ€1
				begin 
					if (in2) next_state = 0; 
					else next_state = 3; 
				end 
	endcase end
```
---
```bash
//è¿™æ®µæ˜¯MealyçŠ¶æ€æœºçš„
reg [1:0] state ,next_state;//å’Œä¸Šé¢çš„æ˜¯ä¸€æ ·çš„
//ä¸åŒçš„åœ°æ–¹å¼€å§‹äº†ï¼Œç”±äºå®ƒçš„è¾“å‡ºå’Œä¸¤ä¸ªå› ç´ æœ‰å…³ï¼Œä½ ç»†å“
//ä¸¤ä¸ªalwaysè¯­å¥éƒ½åšäº†ä»€ä¹ˆäº‹æƒ…ï¼Œå› ä¸ºæˆ‘ä»¬çŸ¥é“alwaysè¯­å¥åœ¨è¿™é‡Œé¢æ˜¯å¹¶è¡Œæ‰§è¡Œçš„ï¼Œå…¶å®æœ‰æ²¡æœ‰å°†ä¸€ä»¶äº‹æƒ…æŒ‰ç…§ä¸åŒçš„æ¡ä»¶åˆ’åˆ†ä¸ºäº†å‡ ä¸ªéƒ¨åˆ†ï¼Œä½†æ˜¯ä»–ä»¬åˆæ˜¯åŒæ—¶æ‰§è¡Œæˆ–è€…è¯´ç›‘è§†çš„å‘¢
always @(posedge clk) 
	if(reset) 	
		state <=idle; //å¤ä½åˆ°åˆå§‹é˜¶æ®µï¼Œè¿™ä¸ªidleå’Œä¸Šé¢çš„st0 st1ä¸€æ ·çš„
	else 
		state <= next_state;
		
always @(state or in1 or in2) 
	begin 
		case (state) 
			2â€™d0: 
				begin 
					out <= in1 & in2; // è¾“å‡º 
					if (in1) next_state <= 1; // ä¸‹ä¸€çŠ¶æ€ç¡®å®š 
					else next_state <= 2; 
				end
			2â€™d1: 
				begin 
					out <= ~in2; 
					if (in2) next_state <= 2; 
					else next_state <= 3; 
				end 
		endcase 
```

##### çŠ¶æ€æœºçš„å†™æ³•
&#8195;&#8195;å…¶å®ä½ å»æœä¸€ä¸‹æˆ–è€…å·´æ‹‰å·´æ‹‰çš„ï¼Œå¯èƒ½æ˜¯å› ä¸ºç°åœ¨è¿˜æ²¡å­¦åˆ°åé¢ï¼Œæ‰€ä»¥æˆ‘è¯´çš„å¦‚æœé”™äº†ï¼Œè¯·å¤§å®¶è§è°…ï¼ŒçŠ¶æ€æœºçš„å†™æ³•æ®è¯´ä¼šåˆ†ä¸ºå››ç§ï¼š**ä¸€æ®µå¼**ã€**ä¸¤æ®µå¼**ã€**ä¸‰æ®µå¼**ä»¥åŠ**å››æ®µå¼**ã€‚
&#8195;&#8195;é¡¾åæ€ä¹‰ï¼Œå°†æ•´ä¸ªè®¾è®¡é€šè¿‡æŸç§æ ‡å‡†åˆ†ä¸ºä¸€æ®µä¸€æ®µçš„ï¼Œç„¶åæ­£ç¡®å®ç°åŠŸèƒ½çš„æ–¹æ³•ï¼Œå¼‚åŒä¼˜å¼Šæ˜¾ç„¶è¿˜æ˜¯æœ‰ç‚¹å¤§çš„...

&#8195;&#8195;**ä¸€æ®µå¼**è‡ªç„¶å°±æ˜¯é€šè¿‡ä¸€æ®µé€»è¾‘è¡¨è¾¾å°†æ•´ä¸ªåŠŸèƒ½æ¶µç›–è¿›å»ï¼Œæ•´ä¸ªçŠ¶æ€æœºçš„çŠ¶æ€è½¬ç§»ã€è½¬ç§»æ¡ä»¶ã€å¯¹åº”çŠ¶æ€çš„è¾“å‡ºéƒ½å†™åœ¨ä¸€ä¸ªalwayså—é‡Œï¼Œä½†æ˜¯è¿™æ ·ï¼Œæˆ‘ä»¬ä¸éš¾è”æƒ³åˆ°å¹³æ—¶æˆ‘ä»¬å†™ä»£ç çš„æ—¶å€™ï¼Œå¦‚æœä¸€ä¸ªé¡¹ç›®æ¯”è¾ƒå¤§ï¼Œä¾‹å¦‚è¯´æ¶‰åŠåˆ°å¾ˆå¤šä¸œè¥¿ï¼Œç„¶åä½ è¿˜ä¸€å®šè¦å°†ä»–æ”¾åˆ°ä¸€ä¸ªæ–‡ä»¶é‡Œé¢ï¼Œå°æœ‹å‹ï¼Œè¿™ä¸ªé—®å·ä½ æ¸…æ¥šäº†å—ï¼Ÿ  
&#8195;&#8195;**ä¸¤æ®µå¼**ï¼Œè¿™ä¸ªå†™æ³•ï¼Œå…¶å®æˆ‘è¯•äº†è¿™å‡ ç§ï¼Œæˆ‘è§‰å¾—ä¸¤æ®µå¼æ¯”è¾ƒé€‚åˆæˆ‘ï¼ŒçŠ¶æ€æœºç”±ä¸¤ä¸ªalwaysè¯­å¥æ„æˆï¼Œç¬¬ä¸€å—åªè°ˆçŠ¶æ€è½¬ç§»ï¼Œå’±è¿™åé¢çš„å°±æ˜¯è¡¥å…¨é€»è¾‘ï¼Œå°†æ¬¡æ€å’Œè¾“å‡ºå†™å‡ºæ¥ã€‚åˆšå¼€å§‹å°±æ„Ÿè§‰è¦ä¸è¿˜æ˜¯å†åˆ†ä¸€ä¸‹ï¼Œä½†æ˜¯å†™è¿‡ä¸€æ¬¡ä¹‹åå°±æ„Ÿè§‰ä¸¤æ®µå¼çœŸé¦™ï¼ŒåŸç†éƒ½æ˜¯è¿™æ ·ï¼Œæˆ‘ä½•å¿…å†å»æµªè´¹æˆ‘è‡ªå·±çš„æ—¶é—´å†å»å†™ä¸€æ¬¡å‘¢ï¼Œæˆ–è€…è¯´åé¢çš„ä¸‰æ®µå¼å››æ®µå¼æœ‰ä¸€ä¸ªå¼Šç«¯ï¼Œå°±æ˜¯å¦‚æœçŠ¶æ€å¤ªå¤šäº†ï¼Œæœ‰çš„æ—¶å€™æ˜¯ä¸å¤ªä¼šå»ç…§ç€çŠ¶æ€å›¾å†™çš„ï¼Œä¸¤æ®µå¼ç›´æ¥ä¸€æ¬¡æ€§å†™å¥½å®ƒä¸é¦™å—ï¼Œæœ‰æ—¶å€™è¿˜å¾—ç¿»ä¸Šé¢çš„ä»£ç ï¼Œç¿»èµ·æ¥è¿˜æ˜¯æœ‰ç‚¹éº»çƒ¦æˆ‘è§‰å¾—ã€‚  
&#8195;&#8195;**ä¸‰æ®µå¼**ï¼Œè¿™ä¸ªå†™æ³•æ˜¯å¤§å®¶å¹³æ—¶æœ€æ¨å¹¿çš„å§ï¼Œå› ä¸ºæˆ‘çœ‹äº†å¾ˆå¤šçŠ¶æ€æœºçš„ä»£ç éƒ½æ˜¯ç”¨çš„ä¸‰æ®µå¼ï¼Œæˆ–è€…è¯´æœ‰ä¸€ä¸ªè¯´æ³•æˆ‘ä¹Ÿä¸çŸ¥é“æ˜¯ä¸æ˜¯å¯¹çš„ï¼Œå› ä¸ºæˆ‘æ²¡å»æ¢è®¨ï¼Œåªæ˜¯åœ¨è®ºå›ä¸Šçœ‹åˆ°æœ‰è¿™ä¹ˆä¸ªè¯´æ³•ï¼Œå°±æ˜¯è¯´ä¸‰æ®µå¼å¹¶ä¸æ˜¯ç”±ä¸‰ä¸ªalwayså—æ„æˆçš„ï¼Œè€Œæ˜¯ç¬¬ä¸€æ®µ+ç¬¬äºŒæ®µ+â€œç¬¬ä¸‰æ®µâ€ï¼Œå‰ä¸¤æ®µéƒ½æ˜¯å¯ä»¥ä¸€ä¸ªalwaysè¯­å¥å¯ä»¥å®ç°çš„ï¼Œä½†æ˜¯è¿™ç¬¬ä¸‰æ®µå¯èƒ½æœ‰å¾ˆå¤šçš„alwaysè¯­å¥ï¼Œè¯´é”™äº†åˆ«å–·æˆ‘ï¼Œåé¢ç¡®å®šäº†æˆ‘ä¼šå›æ¥æ”¹çš„ï¼Œæˆ–è€…å…„å¼Ÿä½ çŸ¥é“çš„è¯ï¼Œä¸»é¡µé‚®ç®±è”ç³»æˆ‘ä¸€ä¸‹ï¼Œå’±ç«‹é©¬æ”¹ï¼è¿™é‡Œéœ€è¦æ³¨æ„ä¸€ä¸‹çš„æ˜¯è¿™ä¸‰æ®µåˆ†ä¸ºæ—¶åºé€»è¾‘ï¼ˆçŠ¶æ€è½¬ç§»å—ï¼‰ã€ç»„åˆé€»è¾‘ï¼ˆè½¬ç§»æ¡ä»¶å—ï¼‰å’Œæ—¶åºé€»è¾‘ï¼ˆå¯¹åº”çŠ¶æ€çš„è¾“å‡ºï¼‰ï¼Œå› æ­¤åœ¨ç¬¬ä¸€æ®µå’Œç¬¬ä¸‰æ®µé‡Œé¢ï¼Œèµ‹å€¼éœ€è¦ç”¨éé˜»å¡èµ‹å€¼ï¼Œä½ çŸ¥é“ä¸ºä»€ä¹ˆå—ï¼Ÿä¸çŸ¥é“å°±æ€è€ƒä¸€ä¸‹ï¼Œå…„å¼Ÿ~ è¿™ä¸ªè®°ä½äº†å“¦ï¼ç„¶åç¬¬äºŒæ®µç”¨é˜»å¡èµ‹å€¼å“¦~  
&#8195;&#8195;**å››æ®µå¼**ï¼Œå››æ®µå¼ä¸æ˜¯æŒ‡ä¸‰ä¸ªalwaysä»£ç ï¼Œè€Œæ˜¯å››æ®µç¨‹åºï¼šç¬¬ä¸€æ®µï¼ŒåŒæ­¥æ—¶åºçš„alwaysæ¨¡å—ï¼Œæ ¼å¼åŒ–æè¿°æ¬¡æ€è¿ç§»åˆ°ç°æ€å¯„å­˜å™¨ï¼›ç¬¬äºŒæ®µï¼Œç»„åˆé€»è¾‘çš„alwaysæ¨¡å—ï¼Œæè¿°çŠ¶æ€è½¬ç§»æ¡ä»¶åˆ¤æ–­ï¼›ç¬¬ä¸‰æ®µï¼Œç”¨assignå®šä¹‰è½¬ç§»æ¡ä»¶ã€‚æ³¨æ„æ¡ä»¶ä¸€å®šè¦åŠ ä¸Šç°æ€ï¼›ç¬¬å››æ®µï¼Œè®¾è®¡è¾“å‡ºä¿¡å·ã€‚è§„èŒƒè¦æ±‚ä¸€ä¸ªalwaysè®¾è®¡ä¸€ä¸ªä¿¡å·ï¼Œå› æ­¤æœ‰å¤šå°‘ä¸ªè¾“å‡ºä¿¡å·ï¼Œå°±æœ‰å¤šå°‘ä¸ªalwaysã€‚å››æ®µå¼è§£æå¼•ç”¨è‡ª[http://blog.sina.com.cn/s/blog_15430b9220102x7ln.html](http://blog.sina.com.cn/s/blog_15430b9220102x7ln.html)  

## æœ‰é™çŠ¶æ€æœºå®ä¾‹æ“ä½œåŠ æ·±ç†è§£
&#8195;&#8195;ä¸‹é¢æ‹¿å‡ ä¸ªæ —å­æ¥å®è·µä¸€ä¸‹ï¼Œåˆ†åˆ«æ˜¯å½“å‰è¯¾ä»¶ä¸Šï¼ˆä¸çŸ¥é“åç»­è¿˜æœ‰æ²¡æœ‰è¯¾ä»¶ï¼‰ä¸€ä¸ªæ²¡æœ‰å®Œæˆçš„æ —å­å’Œè¯¾åä¹ é¢˜
#### 1ã€ç”¨çŠ¶æ€æœºè®¾è®¡äº¤é€šç¯æ§åˆ¶å™¨
&#8195;&#8195;æœ‰ä¸€æ¡ä¸»å¹²é“å’Œä¸€æ¡æ”¯å¹²é“çš„å›åˆç‚¹å½¢æˆäº†ä¸€ä¸ªåå­—äº¤å‰è·¯å£ï¼Œä¸»å¹²é“ä¸ºä¸œè¥¿æ–¹å‘ï¼Œæ”¯å¹²é“ä¸ºå—åŒ—æ–¹å‘ã€‚ä¸ºç¡®ä¿è½¦è¾†å®‰å…¨ï¼Œå¹¶è¿…é€Ÿçš„é€šè¡Œï¼Œåœ¨äº¤å‰é€šé“çš„æ¯ä¸ªå…¥å£å¤„è®¾ç½®äº†çº¢ã€ç»¿ã€é»„ä¸‰è‰²ä¿¡å·
&#8195;&#8195;è¦æ±‚ï¼šoh   å¯¹ä¸èµ·ï¼Œæˆ‘çœŸçš„ä¸æƒ³æ‰“å­—äº†ï¼Œè´´å›¾æ¯”è¾ƒç›´æ¥
![è¦æ±‚](https://img-blog.csdnimg.cn/20200408234542819.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzc2MTQ5MQ==,size_16,color_FFFFFF,t_70)
![çŠ¶æ€åˆ—è¡¨](https://img-blog.csdnimg.cn/20200408234515895.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzc2MTQ5MQ==,size_16,color_FFFFFF,t_70)
![çŠ¶æ€æœºçŠ¶æ€è½¬æ¢å›¾](https://img-blog.csdnimg.cn/20200408234612528.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzc2MTQ5MQ==,size_16,color_FFFFFF,t_70)
&#8195;&#8195;å¤§è‡´å°±æ˜¯è¿™ä¸ªæ ·å­äº†ï¼ŒçŠ¶æ€å›¾æˆ‘ç›´æ¥å°±ç”¨ç°æˆçš„äº†ï¼Œå¹³æ—¶å¦‚æœéœ€è¦è‡ªå·±ç”»è¿™ç§çŠ¶æ€å›¾å¯ä»¥ç”¨visioå’Œroseï¼Œä½†æ˜¯å…¶å®wordã€wpså’Œå…¶ä»–åœ¨çº¿è½¬æ¢å·¥å…·æˆ‘è®°å¾—ä¹Ÿæ˜¯å¯ä»¥ç”»çš„ï¼Œæ‰€ä»¥è¿™ä¸ªé—®é¢˜å€’æ˜¯ä¹Ÿä¸å¤§ã€‚å½“ç„¶ï¼Œæˆ‘ä»¬è¿˜æ˜¯å¿…é¡»å¾—ä¼šæ‰‹ç”»ï¼Œæ¯•ç«Ÿè¿™ç©æ„æ•°ç”µå­¦è¿‡çš„ï¼Œå½“æ—¶ä¸æ˜¯ç”»çš„è®¡æ•°å™¨å·´æ‹‰å·´æ‹‰çš„å—ã€‚  
&#8195;&#8195;å…ˆæŠŠä»£ç ç»™è´´ä¸Šæ¥ï¼Œè¿™ä¸ªä»£ç æˆ‘å†™çš„å¾ˆç¹çï¼Œå¯¹ä¸èµ·å¤§å®¶ï¼Œä½†æ˜¯ä¼˜åŒ–çš„æ–¹æ¡ˆæˆ‘ä¹‹åå†ä¿®æ”¹å§ï¼Œä»Šå¤©å°±åˆ°è¿™é‡Œï¼Œè¿™å„¿è¿˜å·®ä¸€ä¸ªæ•°ç ç®¡é©±åŠ¨æ¨¡å—ï¼Œç„¶åå†é€šè¿‡ä¸€ä¸ªé¡¶å±‚æ–‡ä»¶è¿æ¥èµ·æ¥ï¼Œå°±å®Œæˆäº†ï¼Œä½†æ˜¯æˆ‘æ‡’å•Šï¼Œæœ‰ä»€ä¹ˆåŠæ³•hahahahaahaahaé©±åŠ¨æ€ä¹ˆå†™ï¼Œå¯ä»¥å»çœ‹ä¸€ä¸‹ä¸Šç¯‡æ–‡ç« æˆ–è€…çœ‹çœ‹å®éªŒäºŒå“¦ ~ æ¿€åŠ±æˆ‘ä¹Ÿè´´ä¸Šå§ï¼Œæˆ‘æ˜¯çœŸçš„æ‡’æƒ°æˆ‘å‘ç°ï¼Œå†™ä¸ªæ¿€åŠ±ä¹Ÿæ˜¯è¿™ä¹ˆæ¼«ä¸ç»å¿ƒï¼Œohï¼Œæˆ‘è¿™è¯¥æ­»çš„æ— å¤„å®‰æ”¾çš„é­…åŠ›  
&#8195;&#8195;ä¹‹å‰éƒ¨ç½²çš„ä»£ç å—å‡ºç°äº†æ¢è¡Œæ— æ•ˆï¼ŒæŒ¤æˆä¸€å¨çš„æƒ…å†µï¼ŒçŒœæƒ³å¯èƒ½æ˜¯ç”±äºä»£ç é•¿åº¦è¶…å‡ºç½‘é¡µé»˜è®¤ä»£ç å—é•¿åº¦ï¼Ÿä½†æ˜¯è½¬å¿µä¸€æƒ³ä¸å¯¹ï¼Œä»”ç»†çœ‹äº†çœ‹ï¼Œå‘ç°å¯èƒ½æ˜¯ç”±äºæ²¡æœ‰å£°æ˜ä»£ç æ ¼å¼çš„é—®é¢˜ä»¥åŠä¸­é—´æœ‰ç¬¦å·bugäº†ï¼Œä¿®æ”¹ä¹‹åå°±æ˜¯ä¸‹é¢çš„æ ·å­ï¼Œç¼©è¿›æ˜¾ç¤ºè¿™ä¸ªé—®é¢˜æˆ‘è¿˜æ²¡æœ‰æ‰¾åˆ°è§£å†³åŠæ³•ï¼Œä½†æ˜¯å¤åˆ¶ç²˜è´´åç¼©è¿›æ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œè¿™é‡Œæˆ‘éœ€è¦è§£é‡Šä¸€ä¸‹ï¼Œæˆ‘è¿™é‡Œå°±æ˜¯é€šè¿‡ä¸‰æ®µå¼çš„å†™æ³•å®Œæˆè¿™ä¸ªçŠ¶æ€æœºï¼Œä½†æ˜¯æˆ‘çœŸçš„å¾ˆæƒ³ç”¨ä¸¤æ®µå¼ï¼Œæœ¬æ¥åé¢çš„å€’è®¡æ—¶çš„éƒ¨åˆ†æ˜¯æƒ³ç”¨æ¨¡å—æ¥å†™çš„æˆ–è€…å†™ä¸ªtaskï¼Œä½†æ˜¯è¿™ä¸ªåé¢æœ‰æ—¶é—´å†å»å†™å§ï¼Œæ¸©é¦¨æç¤ºä¸€å¥ï¼Œå¸¸è§çš„æ¨¡å—ä½ å¦‚æœå†™å¥½äº†ï¼Œå®Œå…¨å¯ä»¥å°è£…ä¸€ä¸‹ä¹‹åç›´æ¥æ‹¿æ¥ç”¨ï¼Œæˆ–è€…ä½ è¦æ˜¯æœ‰æ–°çš„æƒ³æ³•ï¼Œæ¬¸~è¿™ä¸ªä»£ç æˆ‘å†™çš„å¥½åƒæœ‰ç‚¹æ°´å¹³ï¼Œå°è£…æˆè‡ªå·±çš„é»‘ç›’å­ï¼Œå¤šå¸…å“¦  

```Verilog
module traffic_control(clock,reset,sensor1,LED,time1_H,time1_L,time2_H,time2_L);
	 
input clock,reset,sensor1;
output reg [5:0] LED;
output reg [3:0] time1_H,time1_L,time2_H,time2_L;

reg [2:0] sensor2 = 3'b000;	 
reg [2:0] current_state,next_state;//çŠ¶æ€å¯„å­˜å™¨

parameter st0=0,st1=1,st2=2,st3=3,st4=4;
//ä¸‰æ®µå¼çŠ¶æ€æœºæè¿°æ–¹å¼ï¼šå°†æ—¶åºé€»è¾‘ä¸ç»„åˆé€»è¾‘åˆ†å¼€è¿›è¡Œæè¿°
//ç¬¬ä¸€æ®µæè¿°æ—¶åºé€»è¾‘--->è¿›è¡Œå½“å‰çŠ¶æ€ä¸ä¸‹ä¸€çŠ¶æ€çš„åˆ‡æ¢
	 always @(posedge clock or negedge reset)
		begin
			if(!reset)
				current_state <= st1;
			else
				current_state <= next_state;
		end
/*
ç¬¬äºŒæ®µæè¿°ç»„åˆé€»è¾‘-->å®ç°å„ä¸ªè¾“å…¥ã€è¾“å‡ºå’ŒçŠ¶æ€åˆ¤æ–­çš„é€»è¾‘æè¿°
æ­¤å¤„çš„æ•æ„Ÿç”µå¹³ä¿¡å·current_state --> ç°æ€
				sensor1 --> ä¼ æ„Ÿå™¨1ï¼ˆå¯ä»¥ç†è§£ä¸ºç‰¹æ®Šæƒ…å†µåˆ°æ¥çš„ä¿¡å·æ ‡å¿—ï¼‰
				sensor2 --> ä¼ æ„Ÿå™¨2ï¼ˆä¸€ä¸ª3ä½çš„ä¿¡å·ï¼Œç”¨æ¥æ£€æµ‹äº¤é€šå„çŠ¶æ€å®Œæˆæƒ…å†µï¼Œè‹¥ä¸º111åˆ™è¡¨ç¤ºä¸‰ä¸ªå»¶æ—¶éƒ½ç»“æŸäº†ï¼‰
*/
	always @(current_state or sensor1 or sensor2 or posedge clock)
		begin
			//åˆå§‹åŒ–
			
			//é€šè¿‡ä¸€ä¸ªcaseè¯­å¥æ¥å®ç°çŠ¶æ€åˆ¤æ–­ä»¥åŠé€»è¾‘å®ç°
			//ç¬¬ä¸€ä¸ªiféƒ½å…ˆåˆ¤æ–­æ˜¯å¦æœ‰ç‰¹æ®Šæƒ…å†µ
			case(current_state)
				st0://çŠ¶æ€0 ä¸»å¹²é“çº¢ç¯äº®ï¼Œæ”¯å¹²é“çº¢ç¯äº®
					begin
						if(sensor1)
							begin
								next_state = st0;
							end
						else
							begin
								next_state = st1;
							end
					end
				st1://çŠ¶æ€1 ä¸»å¹²é“ç»¿ç¯äº® æ”¯å¹²é“çº¢ç¯äº®ï¼Œæ—¶é—´35ç§’
					begin
						if(sensor1)
							begin
								next_state = st0;
							end
						else if(sensor2[2])//åˆ¤æ–­çŠ¶æ€1æ˜¯å¦ç»“æŸï¼Œæ˜¯åˆ™æ‰§è¡Œä¸‹ä¸€çŠ¶æ€ï¼ˆçŠ¶æ€2ï¼‰
							begin
								next_state = st2;
							end
						else
							begin
								next_state = st3;			
							end
					end
				st2://çŠ¶æ€2 ä¸»å¹²é“é»„ç¯äº® æ”¯å¹²é“çº¢ç¯äº®ï¼Œæ—¶é—´5ç§’
					begin
						if(sensor1)
							begin
								next_state = st0;
							end
						else if(sensor2[1])//åˆ¤æ–­çŠ¶æ€2æ˜¯å¦ç»“æŸï¼Œæ˜¯åˆ™æ‰§è¡Œä¸‹ä¸€çŠ¶æ€ï¼ˆçŠ¶æ€3ï¼‰
							begin
								next_state = st3;
							end
						else
							begin
								next_state = st2;	
							end
					end
				st3://çŠ¶æ€3 ä¸»å¹²é“çº¢ç¯äº® æ”¯å¹²é“ç»¿ç¯äº®ï¼Œæ—¶é—´25ç§’
					begin
						if(sensor1)
							begin
								next_state = st0;
							end
						else if(sensor2[0])//åˆ¤æ–­çŠ¶æ€3æ˜¯å¦ç»“æŸï¼Œæ˜¯åˆ™æ‰§è¡Œä¸‹ä¸€çŠ¶æ€ï¼ˆçŠ¶æ€4ï¼‰
							begin
								next_state = st4;
							end
						else
							begin
								next_state = st3;
							end
					end
				st4://çŠ¶æ€4 ä¸»å¹²é“çº¢ç¯äº® æ”¯å¹²é“é»„ç¯äº®ï¼Œæ—¶é—´5ç§’
					begin
						if(sensor1)
							begin
								next_state = st0;
							end
						else if(sensor2[1])//åˆ¤æ–­çŠ¶æ€4æ˜¯å¦ç»“æŸï¼Œæ˜¯åˆ™æ‰§è¡Œä¸‹ä¸€çŠ¶æ€ï¼ˆçŠ¶æ€1ï¼‰
							begin
								next_state = st1;
							end
						else
							begin
								next_state = st3;
							end
					end
			endcase
		end
		
	//ç¬¬ä¸‰æ®µæè¿°çŠ¶æ€è¾“å‡º,åŒæ­¥æ—¶åºalwayså—
	//LEDçŠ¶æ€æ˜¾ç¤ºä¸å€’è®¡æ—¶
	always @(posedge clock or negedge reset)
		begin
			LED <= 0;
			time1_H <= 0;
			time1_L <= 0;
			time2_H <= 0;
			time2_L <= 0;
			if(!reset)
				begin
					sensor2 <= 0;
					LED <= 0;
				end
			else
				begin
					case(current_state)
						st0:
							begin
								LED <= 6'b100100;
								time1_H <= 0;
								time1_L <= 0;
								time2_H <= 0;
								time2_L <= 0;
							end
						st1:
							begin
								LED <= 6'b010100;
								time1_H <= 3;
								time1_L <= 5;
								time2_H <= 3;
								time2_L <= 5;
								if(!reset)
									begin
										LED <= 6'b100100;
										time1_H <= 0;
										time1_L <= 0;
										time2_H <= 0;
										time2_L <= 0;
									end
								else
									begin
										if(time1_L == 0 && time2_L == 0)
											begin
												if(time1_H == 0 && time2_H == 0)
													begin
														sensor2 <= 3'b100;
													end
												else
													begin
														time1_L <= 9;
														time2_L <= 9;
														time1_H <= time1_H - 1;
														time2_H <= time2_H - 1;
													end
											end
										else
											begin
												time1_L <= time1_L - 1;
												time2_L <= time2_L - 1;
											end
									end
							end
						st2:
							begin
								LED <= 6'b001100;
								time1_H <= 0;
								time1_L <= 5;
								time2_H <= 0;
								time2_L <= 5;
								sensor2 <= 3'b010;
								if(!reset)
									begin
										LED <= 6'b100100;
										time1_H <= 0;
										time1_L <= 0;
										time2_H <= 0;
										time2_L <= 0;
									end
								else
									begin
										if(time1_L == 0 && time2_L == 0)
											begin
												if(time1_H == 0 && time2_H == 0)
													begin
														sensor2 <= 3'b010;
													end
												else
													begin
														time1_L <= 9;
														time2_L <= 9;
														time1_H <= time1_H - 1;
														time2_H <= time2_H - 1;
													end
											end
										else
											begin
												time1_L <= time1_L - 1;
												time2_L <= time2_L - 1;
											end
									end
							end
						st3:
							begin
								LED <= 6'b100010;
								time1_H <= 2;
								time1_L <= 5;
								time2_H <= 2;
								time2_L <= 5;
								sensor2 <= 3'b001;
								if(!reset)
									begin
										LED <= 6'b100100;
										time1_H <= 0;
										time1_L <= 0;
										time2_H <= 0;
										time2_L <= 0;
									end
								else
									begin
										if(time1_L == 0 && time2_L == 0)
											begin
												if(time1_H == 0 && time2_H == 0)
													begin
														sensor2 <= 3'b001;
													end
												else
													begin
														time1_L <= 9;
														time2_L <= 9;
														time1_H <= time1_H - 1;
														time2_H <= time2_H - 1;
													end
											end
										else
											begin
												time1_L <= time1_L - 1;
												time2_L <= time2_L - 1;
											end
									end
							end
						st4:
							begin
								LED <= 6'b100001;
								time1_H <= 0;
								time1_L <= 5;
								time2_H <= 0;
								time2_L <= 5;
								sensor2 <= 3'b000;
								if(!reset)
									begin
										LED <= 6'b100100;
										time1_H <= 0;
										time1_L <= 0;
										time2_H <= 0;
										time2_L <= 0;
									end
								else
									begin
										if(time1_L == 0 && time2_L == 0)
											begin
												if(time1_H == 0 && time2_H == 0)
													begin
														sensor2 <= 3'b000;
													end
												else
													begin
														time1_L <= 9;
														time2_L <= 9;
														time1_H <= time1_H - 1;
														time2_H <= time2_H - 1;
													end
											end
										else
											begin
												time1_L <= time1_L - 1;
												time2_L <= time2_L - 1;
											end
									end
							end
					endcase
				end
		end
endmodule

```

æ¿€åŠ±æˆ‘éœ€è¦è¯´ä¸€ä¸‹ï¼Œè¿™ä¸ªæˆ‘åªæ˜¯æµ‹è¯•äº†æœ€åŸºæœ¬çš„ï¼Œæ˜å¤©æˆ‘æ”¹å®Œæ•´å¥½å§

```bash
initial begin
		// Initialize Inputs
		clock = 0;
		reset = 1;
		sensor1 = 0;

		// Wait 100 ns for global reset to finish
		#5 reset = 0;
		#5 reset = 1;
		// Add stimulus here

	end
	always #5 clock=~clock;
```

#### åºåˆ—æ£€æµ‹

#### æ•°å­—é¢‘ç‡è®¡